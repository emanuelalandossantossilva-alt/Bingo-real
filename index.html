<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bingo Real - Oficial</title>
    <style>
        :root { --primary: #facc15; --bg: #020617; --card: #1e293b; --success: #22c55e; }
        html, body { overflow: hidden; height: 100%; position: fixed; width: 100%; font-family: sans-serif; background: var(--bg); color: white; text-align: center; margin: 0; padding: 0; }
        .hidden { display: none !important; }
        
        /* AUTH SCREENS */
        .auth-screen { height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; background: radial-gradient(circle, #1e293b 0%, #020617 100%); }
        .auth-card { background: #0f172a; padding: 30px; border-radius: 15px; border: 1px solid var(--primary); width: 100%; max-width: 320px; }
        .auth-input { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 6px; border: 1px solid #334155; background: #020617; color: white; box-sizing: border-box; }
        .btn-auth { width: 100%; padding: 12px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 10px; text-transform: uppercase; }

        /* GAME UI */
        .header { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: #0f172a; border-bottom: 2px solid var(--primary); height: 50px; }
        .status-bar-topo { display: grid; grid-template-columns: 1fr 1fr 1fr; background: #1e293b; padding: 8px 5px; border-bottom: 1px solid #334155; }
        .status-item { border-right: 1px solid #334155; }
        .status-label { font-size: 8px; color: #94a3b8; text-transform: uppercase; font-weight: bold; }
        .status-val { font-size: 12px; font-weight: bold; }
        
        .card-principal { background: var(--card); border: 1px solid var(--primary); border-radius: 12px; margin: 5px 10px; padding: 12px; display: flex; align-items: center; gap: 12px; }
        .bola-sorteada-master { width: 75px; height: 75px; background: radial-gradient(circle at 30% 30%, #ffffff, #facc15 50%, #b45309); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 900; color: #000; border: 2px solid #78350f; }
        .painel-numeros { display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px; background: #0f172a; padding: 5px; border-radius: 6px; flex: 1; }
        .num-check { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: bold; background: #1e293b; color: #475569; border-radius: 2px; }
        .num-check.ativo { background: var(--success); color: white; }

        #listaCartelas { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; padding: 15px 5px; height: calc(100vh - 400px); overflow-y: auto; }
        .cartela { background: #f8fafc; color: #1e293b; padding: 5px; border-radius: 4px; width: 110px; }
        .grid-cartela { display: grid; grid-template-columns: repeat(5, 1fr); gap: 1px; }
        .num-c { font-size: 10px; font-weight: bold; background: #e2e8f0; padding: 4px 0; }
        .marcado { background: var(--success) !important; color: white !important; }

        #toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: #0f172a; color: var(--primary); padding: 12px; border-radius: 50px; border: 1px solid var(--primary); display: none; z-index: 5000; }
    </style>
</head>
<body>

<div id="toast"></div>

<div id="telaLogin" class="auth-screen">
    <div class="auth-card">
        <h2 style="color:var(--primary)">BINGO REAL</h2>
        <input type="email" id="emailLogin" class="auth-input" placeholder="E-mail">
        <input type="password" id="senhaLogin" class="auth-input" placeholder="Senha">
        <button onclick="fazerLogin()" class="btn-auth" style="background:var(--primary)">Entrar</button>
        <p style="font-size:12px; margin-top:15px;">NÃ£o tem conta? <a href="#" onclick="mudarTela('registro')" style="color:var(--primary)">Cadastre-se</a></p>
    </div>
</div>

<div id="telaRegistro" class="auth-screen hidden">
    <div class="auth-card">
        <h2 style="color:var(--success)">CADASTRO</h2>
        <input type="text" id="nomeReg" class="auth-input" placeholder="Nome">
        <input type="email" id="emailReg" class="auth-input" placeholder="E-mail">
        <input type="password" id="senhaReg" class="auth-input" placeholder="Senha">
        <button onclick="fazerCadastro()" class="btn-auth" style="background:var(--success); color:white">Criar Conta</button>
        <p style="font-size:12px; margin-top:15px;">JÃ¡ tem conta? <a href="#" onclick="mudarTela('login')" style="color:var(--success)">Login</a></p>
    </div>
</div>

<div id="telaJogo" class="hidden">
    <div class="header">
        <button onclick="logout()" style="background:none; border:none; color:white;">ðŸšª</button>
        <div style="font-weight:bold; color:var(--primary);">BINGO REAL</div>
        <button onclick="alert('Abra o modal de PIX')" style="background:var(--success); color:white; border:none; padding:5px 10px; border-radius:4px;">PIX</button>
    </div>
    <div class="status-bar-topo">
        <div class="status-item"><span class="status-label">Tempo</span><br><span id="timerTxt" class="status-val">05:00</span></div>
        <div class="status-item"><span class="status-label">Saldo</span><br><span id="playerSaldoStatus" class="status-val" style="color:var(--success);">R$ 0,00</span></div>
        <div class="status-item"><span class="status-label">Meu ID</span><br><span id="userIdDisplay" class="status-val">...</span></div>
    </div>
    <div class="card-principal">
        <div class="bola-sorteada-master" id="bolaGrande">--</div>
        <div class="painel-numeros" id="gradeNumeros"></div>
    </div>
    <div style="background:#0f172a; padding:5px; font-size:11px; color:var(--primary);">MINHAS CARTELAS</div>
    <div id="listaCartelas"></div>
</div>

<script>
    const API = "https://bingo-backend-89dt.onrender.com";
    let USER_ID = localStorage.getItem('userId');

    function mudarTela(t) {
        document.getElementById('telaLogin').classList.add('hidden');
        document.getElementById('telaRegistro').classList.add('hidden');
        document.getElementById(t === 'login' ? 'telaLogin' : 'telaRegistro').classList.remove('hidden');
    }

    async function fazerLogin() {
        const email = document.getElementById('emailLogin').value;
        const senha = document.getElementById('senhaLogin').value;
        const res = await fetch(`${API}/login`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ email, senha }) });
        const data = await res.json();
        if(res.ok) { localStorage.setItem('userId', data._id); location.reload(); }
        else alert(data.message);
    }

    async function fazerCadastro() {
        const name = document.getElementById('nomeReg').value;
        const email = document.getElementById('emailReg').value;
        const senha = document.getElementById('senhaReg').value;
        const res = await fetch(`${API}/register`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ name, email, senha }) });
        if(res.ok) { alert("Cadastrado!"); mudarTela('login'); }
    }

    function logout() { localStorage.clear(); location.reload(); }

    function iniciarGrade() {
        const g = document.getElementById('gradeNumeros');
        g.innerHTML = '';
        for (let i = 1; i <= 50; i++) g.innerHTML += `<div class="num-check" id="num-${i}">${i}</div>`;
    }

    if(USER_ID) {
        document.getElementById('telaLogin').classList.add('hidden');
        document.getElementById('telaJogo').classList.remove('hidden');
        iniciarGrade();
        // Aqui vocÃª chamaria sua funÃ§Ã£o de atualizarInterface() repetidamente
    }
</script>
</body>
</html>
