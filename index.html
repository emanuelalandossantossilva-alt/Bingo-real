<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BINGO REAL - AUTOM√ÅTICO</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; text-align: center; }
        .painel-pote { background: linear-gradient(135deg, #ffd700, #daa520); color: #000; padding: 25px; margin: 15px; border-radius: 20px; border: 2px solid #fff; box-shadow: 0 0 20px #daa520; }
        .carteira { background: #111; padding: 15px; border-bottom: 3px solid #007bff; font-size: 24px; font-weight: bold; color: #007bff; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; }
        .cartela { background: #1a1a1a; border: 1px solid #333; padding: 15px; border-radius: 12px; cursor: pointer; }
        .cartela:hover { border-color: #ffd700; }
        .btn { width: 90%; padding: 18px; border: none; border-radius: 12px; font-weight: bold; font-size: 18px; cursor: pointer; margin-top: 10px; }
        .btn-deposito { background: #007bff; color: #fff; }
        .btn-saque { background: #28a745; color: #fff; }
        input { width: 85%; padding: 15px; margin: 10px; border-radius: 10px; border: 1px solid #444; background: #222; color: #fff; }
    </style>
</head>
<body>

    <div class="carteira">
        SALDO: R$ <span id="saldo-real">0,00</span>
    </div>

    <div class="painel-pote">
        <div style="font-weight: 900;">üèÜ PR√äMIO DO SORTEIO</div>
        <div style="font-size: 40px; font-weight: 900;">R$ <span id="pote-valor">0,00</span></div>
    </div>

    <div class="grid">
        <div class="cartela" onclick="comprarCartela(1)">
            <div style="background:#ffd700; color:#000; font-weight:bold; border-radius:5px;">CARTELA #01</div>
            <div style="color:#28a745; font-weight:bold; margin-top:10px;">R$ 2,00</div>
        </div>
        <div class="cartela" onclick="comprarCartela(2)">
            <div style="background:#ffd700; color:#000; font-weight:bold; border-radius:5px;">CARTELA #02</div>
            <div style="color:#28a745; font-weight:bold; margin-top:10px;">R$ 2,00</div>
        </div>
    </div>

    <div style="background:#111; padding:20px; margin:15px; border-radius:20px;">
        <h3 style="color:#007bff;">DEPOSITAR VIA PIX</h3>
        <input type="number" id="valor-deposito" placeholder="Valor do Dep√≥sito">
        <button class="btn btn-deposito" onclick="pagarAgora()">GERAR PIX DE VERDADE</button>
    </div>

    <div style="background:#111; padding:20px; margin:15px; border-radius:20px; border: 1px solid #28a745;">
        <h3 style="color:#28a745;">SACAR PARA MEU PIX</h3>
        <input type="number" id="v-saque" placeholder="Valor">
        <input type="text" id="c-pix" placeholder="Sua Chave PIX">
        <button class="btn btn-saque" onclick="saqueAutomatico()">SAQUE AUTOM√ÅTICO</button>
    </div>

    <script>
        const SERVIDOR = "https://bingo-backend-89dt.onrender.com";

        // 1. PAGAMENTO REAL
        async function pagarAgora() {
            const v = document.getElementById('valor-deposito').value;
            if(!v) return alert("Digite o valor!");
            // Envia para o seu servidor criar o checkout no Mercado Pago/SuitPay
            window.location.href = `${SERVIDOR}/checkout?valor=${v}`;
        }

        // 2. COMPRA E AC√öMULO (1,80)
        async function comprarCartela(id) {
            const res = await fetch(`${SERVIDOR}/comprar`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ cartelaId: id })
            });
            const dados = await res.json();
            if(dados.sucesso) {
                alert("Compra realizada! R$ 1,80 adicionados ao pr√™mio.");
                atualizar();
            } else {
                alert("Voc√™ precisa de saldo real para comprar!");
            }
        }

        // 3. SAQUE AUTOM√ÅTICO REAL (SEM TELEGRAM)
        async function saqueAutomatico() {
            const v = document.getElementById('v-saque').value;
            const c = document.getElementById('c-pix').value;
            
            const res = await fetch(`${SERVIDOR}/saque-automatico`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ valor: v, chave: c })
            });
            
            const resultado = await res.json();
            if(resultado.sucesso) {
                alert("Dinheiro enviado para sua conta!");
                atualizar();
            } else {
                alert("Erro no saque autom√°tico: " + resultado.msg);
            }
        }

        async function atualizar() {
            try {
                const res = await fetch(`${SERVIDOR}/status`);
                const info = await res.json();
                document.getElementById('saldo-real').innerText = info.saldo.toFixed(2);
                document.getElementById('pote-valor').innerText = info.pote.toFixed(2);
            } catch(e) {}
        }
        setInterval(atualizar, 5000);
    </script>
</body>
</html>
